[gd_scene load_steps=19 format=3 uid="uid://uk4whdca7g18"]

[ext_resource type="Script" uid="uid://bnt3hyn73pbqt" path="res://scripts/Game.Entities/types/Door/DoorEntity.cs" id="1_t80si"]
[ext_resource type="Script" uid="uid://bfa6shq0nho0t" path="res://scripts/Game.Entities/components/Toggle/ToggleComponent.cs" id="2_jqc5p"]
[ext_resource type="Texture2D" uid="uid://bos34kfj3myqe" path="res://addons/kenney_prototype_textures/dark/texture_05.png" id="2_kp3xt"]
[ext_resource type="Script" uid="uid://bb3viohvyt16p" path="res://scripts/Game.Entities/components/Health/HealthComponent.cs" id="3_g5khy"]
[ext_resource type="Texture2D" uid="uid://frg1s6guouhb" path="res://addons/kenney_prototype_textures/light/texture_01.png" id="3_kp3xt"]
[ext_resource type="Script" uid="uid://gn1g7hsmfe5b" path="res://scripts/Game.Entities/types/DestructibleProp/DestructibleDoorData.cs" id="4_b2twt"]

[sub_resource type="Resource" id="Resource_jqc5p"]
script = ExtResource("2_jqc5p")
State = false

[sub_resource type="Resource" id="Resource_g5khy"]
script = ExtResource("3_g5khy")
InternalHealth = 0

[sub_resource type="Resource" id="Resource_swa6y"]
script = ExtResource("4_b2twt")
DoorState = SubResource("Resource_jqc5p")
HealthState = SubResource("Resource_g5khy")
ServerScene = "uid://uk4whdca7g18"
ClientScene = "uid://uk4whdca7g18"
metadata/_custom_type_script = "uid://gn1g7hsmfe5b"

[sub_resource type="BoxShape3D" id="BoxShape3D_t80si"]
size = Vector3(0.1, 2, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_w8g3v"]
albedo_texture = ExtResource("2_kp3xt")

[sub_resource type="BoxMesh" id="BoxMesh_cs13v"]
material = SubResource("StandardMaterial3D_w8g3v")
size = Vector3(0.1, 2, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_kp3xt"]
albedo_texture = ExtResource("3_kp3xt")

[sub_resource type="BoxMesh" id="BoxMesh_t80si"]
material = SubResource("StandardMaterial3D_kp3xt")
size = Vector3(0.2, 0.1, 0.1)

[sub_resource type="Animation" id="Animation_cnrrr"]
resource_name = "CloseDoor"
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation:y")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(1.5708, -0.25, 0, 0.25, 0, 0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0, 1)
}

[sub_resource type="Animation" id="Animation_kp3xt"]
resource_name = "OpenDoor"
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation:y")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0, 1.5708, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0, 1)
}

[sub_resource type="Animation" id="Animation_w8g3v"]
length = 0.001
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation:y")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_cnrrr"]
_data = {
&"CloseDoor": SubResource("Animation_cnrrr"),
&"OpenDoor": SubResource("Animation_kp3xt"),
&"RESET": SubResource("Animation_w8g3v")
}

[node name="DoorEntity" type="AnimatableBody3D" node_paths=PackedStringArray("player")]
script = ExtResource("1_t80si")
Data = SubResource("Resource_swa6y")
player = NodePath("AnimationPlayer")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -0.5)
shape = SubResource("BoxShape3D_t80si")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -0.5)
mesh = SubResource("BoxMesh_cs13v")

[node name="MeshInstance3D" type="MeshInstance3D" parent="MeshInstance3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.4)
mesh = SubResource("BoxMesh_t80si")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_cnrrr")
}
