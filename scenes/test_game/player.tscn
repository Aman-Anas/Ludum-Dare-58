[gd_scene load_steps=6 format=3 uid="uid://5tfng4tp7c4"]

[ext_resource type="PackedScene" uid="uid://c610j0q8br2ae" path="res://assets/hitboxes/hitbox3.glb" id="1_kd8d6"]
[ext_resource type="PackedScene" uid="uid://db5mfageo8ulj" path="res://assets/rigs/new_char.glb" id="2_jjmcg"]
[ext_resource type="Script" uid="uid://hdbrdvgu3qs0" path="res://scripts/entities/SimpleRigidPlayer.cs" id="2_x2qyr"]
[ext_resource type="Script" uid="uid://bxltufk1m4lgw" path="res://scripts/entities/InteractionRay.cs" id="5_ptte0"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_lt2x0"]
friction = 0.0

[node name="Player" node_paths=PackedStringArray("floorSensors", "yawTarget", "pitchTarget", "headMesh", "mouseLookRotationTarget", "animPlayer") instance=ExtResource("1_kd8d6")]
collision_layer = 2
collision_mask = 3
physics_material_override = SubResource("PhysicsMaterial_lt2x0")
continuous_cd = true
script = ExtResource("2_x2qyr")
floorSensors = NodePath("FootRays")
yawTarget = NodePath("CameraYawTarget")
pitchTarget = NodePath("CameraYawTarget/CameraPitchTarget")
headMesh = NodePath("player_rig_default/head")
mouseLookRotationTarget = NodePath("MouseLookRotationTarget")
animPlayer = NodePath("player_rig_default/AnimationPlayer")

[node name="player_rig_default" parent="." index="0" instance=ExtResource("2_jjmcg")]

[node name="rig_game" parent="player_rig_default" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.50996e-08, 0, -0.1)

[node name="player_rig_default_rig_player_Skeleton3D#BoneAttachment3D" type="BoneAttachment3D" parent="player_rig_default/rig_game/Skeleton3D" index="5"]
transform = Transform3D(1, -2.84217e-14, 2.38418e-07, 2.28706e-14, 1, 1.19209e-07, -2.38419e-07, -1.3411e-07, 1, -2.83755e-15, 1.56968, -1.30385e-08)
bone_name = "DEF-spine.006"
bone_idx = 6

[node name="player_rig_default_rig_player_Skeleton3D_BoneAttachment3D#CameraTargetPosition" type="RemoteTransform3D" parent="player_rig_default/rig_game/Skeleton3D/player_rig_default_rig_player_Skeleton3D#BoneAttachment3D" index="0"]
transform = Transform3D(1, 1.35003e-13, -2.38419e-07, -2.91322e-13, 1, -5.06639e-07, 2.38419e-07, 5.06639e-07, 1, -2.66454e-15, 0.1, 1.49012e-08)
remote_path = NodePath("../../../../../CameraYawTarget")
update_rotation = false
update_scale = false

[node name="head" parent="player_rig_default" index="1"]
transform = Transform3D(1.00001, -3.23531e-13, 3.01995e-07, 1.70532e-13, 1, 5.06644e-07, -3.01995e-07, -5.06639e-07, 1.00001, -1.50996e-08, 1.66968, -0.1)

[node name="AnimationPlayer" parent="player_rig_default" index="2"]
playback_default_blend_time = 1.0

[node name="FootRays" type="Node3D" parent="." index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.1, 0)

[node name="Middle" type="RayCast3D" parent="FootRays" index="0"]
target_position = Vector3(0, -0.11, 0)

[node name="Right" type="RayCast3D" parent="FootRays" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.3, 0, 0)
target_position = Vector3(0, -0.11, 0)

[node name="RightFront" type="RayCast3D" parent="FootRays" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.2, 0, 0.2)
target_position = Vector3(0, -0.11, 0)

[node name="RightBack" type="RayCast3D" parent="FootRays" index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.2, 0, -0.2)
target_position = Vector3(0, -0.11, 0)

[node name="Left" type="RayCast3D" parent="FootRays" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.3, 0, 0)
target_position = Vector3(0, -0.11, 0)

[node name="LeftFront" type="RayCast3D" parent="FootRays" index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.2, 0, 0.2)
target_position = Vector3(0, -0.11, 0)

[node name="LeftBack" type="RayCast3D" parent="FootRays" index="6"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.2, 0, -0.2)
target_position = Vector3(0, -0.11, 0)

[node name="Forward" type="RayCast3D" parent="FootRays" index="7"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.3)
target_position = Vector3(0, -0.11, 0)

[node name="Back" type="RayCast3D" parent="FootRays" index="8"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.3)
target_position = Vector3(0, -0.11, 0)

[node name="ForcePosition" type="Node3D" parent="." index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="CameraYawTarget" type="Node3D" parent="." index="4"]
transform = Transform3D(-1, 2.47031e-13, -1.50996e-07, 1.7053e-13, 1, 5.0664e-07, 1.50996e-07, 5.06639e-07, -1, 2.25877e-14, 1.66968, 0.1)
top_level = true

[node name="HeadPosition" type="RemoteTransform3D" parent="CameraYawTarget" index="0"]
remote_path = NodePath("../../player_rig_default/head")
update_rotation = false
update_scale = false

[node name="CameraPitchTarget" type="Node3D" parent="CameraYawTarget" index="1"]
transform = Transform3D(1, 6.77626e-21, 0, 6.77626e-21, 1, 0, 0, 0, 1, 0, 0, 0.15)

[node name="MainPlayerCamera" type="Camera3D" parent="CameraYawTarget/CameraPitchTarget" index="0"]
transform = Transform3D(-1, 8.40257e-19, -1.50996e-07, 6.77626e-20, 1, 9.66338e-13, 1.50996e-07, 0, -1, 1.50996e-08, 0, 0.1)
fov = 87.0
near = 0.02
far = 100000.0

[node name="RayCast3D" type="RayCast3D" parent="CameraYawTarget/CameraPitchTarget/MainPlayerCamera" index="0"]
transform = Transform3D(-1, 8.13152e-19, 1.50996e-07, 1.76183e-19, 1, 9.66338e-13, -1.50996e-07, 0, -1, 0, 0, 0)
visible = false
target_position = Vector3(0, 0, 30)
script = ExtResource("5_ptte0")

[node name="CSGTorus3D" type="CSGTorus3D" parent="CameraYawTarget/CameraPitchTarget/MainPlayerCamera/RayCast3D" index="0"]
transform = Transform3D(1, 2.38419e-07, 1.80952e-13, -2.91323e-13, 4.62929e-07, 1, 2.38419e-07, -1, 4.62928e-07, 0, 0, 2)
inner_radius = 0.086
outer_radius = 0.105

[node name="HeadTransformRotation" type="RemoteTransform3D" parent="CameraYawTarget/CameraPitchTarget" index="1"]
remote_path = NodePath("../../../player_rig_default/head")
update_position = false
update_scale = false

[node name="MouseLookRotationTarget" type="Node3D" parent="." index="5"]
transform = Transform3D(1, -2.91323e-13, 2.38419e-07, 1.7053e-13, 1, 5.0664e-07, -2.38419e-07, -5.06639e-07, 1, 0, 0, 0)

[editable path="player_rig_default"]
